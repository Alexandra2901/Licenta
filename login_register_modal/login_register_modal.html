<style>
  .login-page {
    opacity: 1;
    background-color: #ccc;
    position: fixed;
    width: 100%;
    height: 100%;
    top: 0px;
    left: 0px;
    z-index: 1000;
  }

  body {
    padding-top: 60px;
  }
</style>

<div class="login-page">
  <div class="row">
    <div class="col-sm-4">
      <a class="btn big-login" data-toggle="modal" href="javascript:void(0)" onclick="openLoginModal();">Log in</a>
    </div>

    <div class="modal fade login" id="loginModal">
      <div class="modal-dialog login animated">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h4 class="modal-title">Login with</h4>
          </div>

          <div class="modal-body">
            <div class="box">
              <div class="content">
                <div class="error"></div>
                <div class="form loginBox">
                  <form method="post" action="/login" accept-charset="UTF-8">
                    <input id="email" class="form-control" type="text" placeholder="Email" name="email">
                    <input id="password" class="form-control" type="password" placeholder="Password" name="password">
                    <input class="btn btn-default btn-login" type="button" value="Login" onclick="loginAjax()">
                  </form>
                </div>
              </div>
            </div>
            <div class="box">
              <div class="content registerBox" style="display:none;">
                <div class="form">
                  <form method="post" html="{:multipart=>true}" data-remote="true" action="/register" accept-charset="UTF-8">
                    <input id="email" class="form-control" type="text" placeholder="Email" name="email">
                    <input id="password" class="form-control" type="password" placeholder="Password" name="password">
                    <input id="password_confirmation" class="form-control" type="password" placeholder="Repeat Password" name="password_confirmation">
                    <input class="btn btn-default btn-register" type="submit" value="Create account" name="commit">
                  </form>
                </div>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <div class="forgot login-footer">
              <span>Looking to
                    <a href="showRegisterForm();">create an account</a>?
              </span>
            </div>
            <div class="forgot register-footer" style="display:none">
              <span>Already have an account?</span>
              <a href="showLoginForm();">Login</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

  <script>
    function addCss(fileName) {
      var link1 = '<link rel="stylesheet" type="text/css" href="' + fileName + '">'
      $('head').append(link1)
      var link2 = '<link rel="stylesheet" type="text/css" href="' + fileName + '">'
      $('head').append(link2)
      var link3 = '<link rel="stylesheet" type="text/css" href="' + fileName + '">'
      $('head').append(link3)
    };

    addCss('login_register_modal/login-register.css');
    addCss('login_register_modal/bootstrap3/css/bootstrap.css');
    addCss('http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css');

    function showRegisterForm() {
      $('.loginBox').fadeOut('fast', function() {
        $('.registerBox').fadeIn('fast');
        $('.login-footer').fadeOut('fast', function() {
          $('.register-footer').fadeIn('fast');
        });
        $('.modal-title').html('Please Register!');
      });
      $('.error').removeClass('alert alert-danger').html('');
    }

    function showLoginForm() {
      $('#loginModal .registerBox').fadeOut('fast', function() {
        $('.loginBox').fadeIn('fast');
        $('.register-footer').fadeOut('fast', function() {
          $('.login-footer').fadeIn('fast');
        });
        $('.modal-title').html('Please Login!');
      });
      $('.error').removeClass('alert alert-danger').html('');
    }

    function openLoginModal() {
      showLoginForm();
      setTimeout(function() {
        $('#loginModal').modal('show');
      }, 230);
    }

    function openRegisterModal() {
      showRegisterForm();
      setTimeout(function() {
        $('#loginModal').modal('show');
      }, 230);
    }

    function loginAjax() {
      shakeModal();
    }

    function shakeModal() {
      $('#loginModal .modal-dialog').addClass('shake');
      $('.error').addClass('alert alert-danger').html("Invalid email/password combination");
      $('input[type="password"]').val('');
      setTimeout(function() {
        $('#loginModal .modal-dialog').removeClass('shake');
      }, 1000);
    }
  </script>
